#!/usr/bin/env node

var path = require('path');
var fs = require('fs');
var lib = path.join(path.dirname(fs.realpathSync(__filename)), '../lib');

process.ARGV = process.argv = process.argv.slice(2, process.argv.length);
var docco = require(lib + '/docco.js');

var docco_styles = fs.readFileSync(__dirname + '/../resources/docco.css').toString();

var sources = process.ARGV.sort();
console.log(sources);
if(sources.length){
  docco.ensure_directory('docs', function(){
    console.log(path.existsSync('docs'));
    fs.writeFile('docs/docco.css', docco_styles);
    files = sources.slice(0);
    nextFile = function(){
      if(files.length)
        docco.generate_documentation(files.shift(), sources, nextFile);
    }
    nextFile();
  });
}
